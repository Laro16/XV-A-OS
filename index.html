<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Invitaci√≥n XV ‚Äî Plantilla Responsive</title>
  <meta name="description" content="Invitaci√≥n elegante optimizada para celular con cuenta regresiva, galer√≠a, mapa, RSVP por WhatsApp y audio.">

  <!-- Tipograf√≠as & Iconos -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

  <style>
    :root{
      --primary:#c6a664; --primary-2:#a9904f;
      --text:#1f1f1f; --muted:#6b6b6b;
      --card:#ffffffEE; --bg-color:#f6edf1;
      --shadow: 0 8px 24px rgba(0,0,0,.12);
      --radius: 20px;

      /* Textura + foto (opcional) */
      --texture: radial-gradient(60vw 60vw at -10% -10%, #fdf6f9 0 30%, transparent 32%) ,
                 radial-gradient(50vw 50vw at 120% -20%, #f7e7ee 0 35%, transparent 37%) ,
                 radial-gradient(40vw 40vw at 50% 120%, #f3dbe6 0 28%, transparent 30%);
      --bg-image: url("./assets/img/portada.jpg");
      --bg-blend: soft-light;

      /* Hero fallback */
      --hero-image: url("./assets/img/portada.jpg");

      /* Imagen del SOBRE pantalla inicial */
      --gate-image: url('./assets/img/sobre.jpg'); /* ‚Üê pon tu imagen del sobre aqu√≠ */
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;
      line-height:1.6;
      background:
        var(--texture),
        var(--bg-image);
      background-color: var(--bg-color);
      background-repeat:no-repeat, no-repeat;
      background-size: cover, cover;
      background-position:center top, center top;
      background-blend-mode: normal, var(--bg-blend);
      overflow-x:hidden;
    }
    body.lock{ overflow:hidden } /* bloquea scroll mientras est√° el sobre */

    .wrap{ width:100%; max-width:720px; margin-inline:auto; padding-inline:16px; }
    .card{ background:var(--card); backdrop-filter: blur(8px); border-radius:var(--radius); box-shadow:var(--shadow); }

    /* üì® SOBRE (overlay) */
    #gate{
      position:fixed; inset:0; z-index:9999;
      display:grid; place-items:center;
      background-image: var(--gate-image);
      background-size: cover; background-position: center;
      box-shadow: 0 0 0 100vmax rgba(0,0,0,.12) inset;
      animation: gateIn .6s ease both;
      transition: opacity .7s ease, transform .7s ease;
    }
    @keyframes gateIn{
      from{ opacity:0; transform:scale(1.03) }
      to  { opacity:1; transform:scale(1) }
    }
    #gate.open{ opacity:0; transform: scale(1.05); pointer-events:none; }

    #gate .seal{
      display:inline-grid; place-items:center;
      width:110px; height:110px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #e7cf86, #b48f3f 70%, #9b7a2f);
      color:#5b4720; font-family:'Playfair Display', serif; font-weight:700;
      box-shadow: 0 8px 18px rgba(0,0,0,.25), inset 0 2px 4px rgba(255,255,255,.35);
      border:1px solid rgba(92,72,28,.35);
      cursor:pointer; user-select:none;
      transform: scale(1); transition: transform .15s ease;
    }
    #gate .seal:active{ transform: scale(.96); }
    #gate .hint{
      margin-top:12px; font-size:13px; color:#6e6e6e; background:#ffffffb3;
      padding:6px 10px; border-radius:999px; backdrop-filter: blur(6px);
    }

    /* HERO */
    .hero{
      position:relative; overflow:hidden; border-radius:0 0 32px 32px;
      min-height: 64vh; display:flex; align-items:flex-end;
      background-image: var(--hero-image); background-size: cover; background-position: center;
    }
    .hero .portrait{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
      filter: contrast(1.05) saturate(1.05);
    }
    .monogram{
      position:relative; z-index:2;
      width:210px; height:210px; margin:0 auto -22px;
      border-radius:50%; display:grid; place-items:center; color:#fff; text-align:center;
      background: radial-gradient(120px 120px at center, rgba(198,166,100,.95), rgba(169,144,79,.95));
      box-shadow:0 12px 30px rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.35);
    }
    .monogram .small{font:600 14px/1 'Poppins',sans-serif; letter-spacing:.2em}
    .monogram .big{font:400 46px/1 'Great Vibes', cursive}

    /* Cuenta regresiva */
    .countdown{ position:relative; z-index:2; display:flex; justify-content:space-between; gap:10px; padding:14px 12px 24px; color:#fff; font-weight:600; }
    .countdown .item{ flex:1; text-align:center; background:rgba(0,0,0,.4); border-radius:14px; padding:10px 6px; }
    .countdown .num{ font-size:24px; display:block; }
    .countdown .lbl{ font-size:12px; opacity:.9; letter-spacing:.03em }

    /* Secciones */
    section{ padding:28px 0; }
    h2{ font-family:'Playfair Display', serif; font-weight:700; font-size:28px; margin:0 0 8px; text-align:center; }
    .subtitle{ text-align:center; color:var(--muted); margin-bottom:18px; }
    .intro{ text-align:center; padding:20px; }
    .script{ font-family:'Great Vibes', cursive; font-size:36px; color:var(--primary-2); }

    /* D√≥nde & Cu√°ndo */
    .grid{ display:grid; gap:18px; }
    .place img{ width:100%; aspect-ratio: 4/3; object-fit:cover; border-radius:14px; }
    .place h3{ margin:12px 0 6px; font-family:'Playfair Display',serif; }
    .meta{ color:var(--muted); font-size:14px; }
    .btns{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .btn{ appearance:none; border:0; cursor:pointer; padding:10px 14px; border-radius:12px; background:var(--primary); color:#fff; font-weight:600; box-shadow:var(--shadow); text-decoration:none; display:inline-flex; align-items:center; gap:8px; }
    .btn.ghost{ background:transparent; color:var(--primary); border:2px solid var(--primary) }

    /* Galer√≠a */
    .carousel{ position:relative; }
    .track{ display:flex; overflow:auto; scroll-snap-type:x mandatory; gap:10px; padding-bottom:8px; }
    .track img{ width:100%; flex:0 0 100%; scroll-snap-align:center; border-radius:18px; aspect-ratio: 3/4; object-fit:cover; }
    .nav{ position:absolute; inset:0; display:flex; justify-content:space-between; align-items:center; pointer-events:none; }
    .nav button{ pointer-events:auto; border:none; background:rgba(0,0,0,.5); color:#fff; width:42px; height:42px; border-radius:50%; display:grid; place-items:center; }

    /* RSVP */
    .rsvp small{ color:var(--muted); }
    .field{ display:flex; gap:8px; margin:10px 0; }
    .field input, .field select{ flex:1; padding:12px 12px; border-radius:12px; border:1.5px solid #ddd; background:#fff; font:inherit; }

    /* Bot√≥n de m√∫sica flotante */
    .music{ position:fixed; right:14px; bottom:16px; z-index:50; }

    /* Animaciones al hacer scroll */
    .aos{ opacity:0; transform: translateY(16px); transition: opacity .7s ease, transform .7s ease; }
    .aos.show{ opacity:1; transform:none }

    .divider{ height:1px; background:linear-gradient(to right, transparent, #00000020 15%, #00000020 85%, transparent); margin:8px 0 16px; }

    /* ‚ú® Efecto chispas (para cualquier click) */
    .spark{
      position: fixed;
      width: 6px; height: 6px; border-radius: 50%;
      background: #ffe07a; pointer-events: none;
      box-shadow: 0 0 8px #fff, 0 0 16px #ffd28a;
      animation: spark-pop .8s ease-out forwards;
      z-index: 99999;
    }
    @keyframes spark-pop{
      0%{ transform: translate(-50%,-50%) scale(0); opacity:1 }
      70%{ transform: translate(-50%,-50%) scale(1) }
      100%{ transform: translate(-50%,-50%) scale(0); opacity:0 }
    }
  </style>
</head>

<body class="lock">
  <!-- üì® SOBRE -->
  <div id="gate" role="dialog" aria-label="Sobre de invitaci√≥n" aria-modal="true">
    <button class="seal" id="openGate" aria-label="Abrir invitaci√≥n"><span>Abrir</span></button>
    <div class="hint">Toca el sello para abrir</div>
  </div>

  <!-- AUDIO -->
  <audio id="bgMusic" src="" loop preload="none"></audio> <!-- Pon aqu√≠ tu **URL_MUSICA_FONDO** o ./assets/audio/musica.mp3 -->
  <audio id="voiceNote" src="" preload="none"></audio>   <!-- Pon aqu√≠ tu **URL_AUDIO_INVITACION** o ./assets/audio/mensaje.mp3 -->
  <audio id="openSfx" src="./assets/audio/open.mp3" preload="auto"></audio> <!-- üîä sonido abrir sobre -->

  <main class="wrap" id="app" data-event-datetime="2025-11-15T18:00">
    <!-- HERO -->
    <header class="hero">
      <img class="portrait" src="./assets/img/portada.jpg" alt="Retrato de la quincea√±era" onerror="this.style.display='none'"/>
      <div class="monogram" aria-label="Monograma">
        <div>
          <div class="small">XV</div>
          <div class="big">BD</div>
        </div>
      </div>
      <div class="countdown" id="countdown" aria-live="polite">
        <div class="item"><span class="num" id="d">--</span><span class="lbl">D√≠as</span></div>
        <div class="item"><span class="num" id="h">--</span><span class="lbl">Horas</span></div>
        <div class="item"><span class="num" id="m">--</span><span class="lbl">Minutos</span></div>
        <div class="item"><span class="num" id="s">--</span><span class="lbl">Segundos</span></div>
      </div>
    </header>

    <!-- INTRO -->
    <section class="card intro aos">
      <h2>¬°Te invito a mis XV!</h2>
      <p>Hay momentos en la vida que siempre vamos a recordar. Me encantar√° compartir este d√≠a contigo.</p>
      <p class="script">Brenda Darani</p>
      <div class="btns" style="justify-content:center; margin-top:10px;">
        <button class="btn ghost" id="btnVoice"><i class="bi bi-mic-fill"></i> Escuchar invitaci√≥n</button>
      </div>
    </section>

    <!-- D√ìNDE & CU√ÅNDO -->
    <section class="aos">
      <h2>D√≥nde & Cu√°ndo</h2>
      <p class="subtitle">Acomp√°√±ame en la ceremonia y la recepci√≥n.</p>
      <div class="grid">
        <article class="card place">
          <img src="./assets/img/ceremonia.jpg" alt="Foto del lugar de la ceremonia" loading="lazy" onerror="this.style.display='none'">
          <div style="padding:12px 14px 16px;">
            <h3>Catedral de Guadalajara</h3>
            <div class="meta">S√°bado 30 de agosto, 6:00 pm</div>
            <div class="divider"></div>
            <div class="meta"><strong>Direcci√≥n:</strong> Av. Fray Antonio Alcalde 10, Zona Centro, Guadalajara</div>
            <div class="btns">
              <a class="btn ghost" target="_blank" rel="noopener" href="https://maps.google.com/?q=Catedral+de+Guadalajara"><i class="bi bi-geo-alt-fill"></i> Ver mapa</a>
              <button class="btn addcal" data-title="Misa de XV" data-location="Catedral de Guadalajara" data-duration="PT60M"><i class="bi bi-calendar-plus"></i> Agendar</button>
            </div>
          </div>
        </article>
        <article class="card place">
          <img src="./assets/img/recepcion.jpg" alt="Foto del sal√≥n de la recepci√≥n" loading="lazy" onerror="this.style.display='none'">
          <div style="padding:12px 14px 16px;">
            <h3>Hacienda de los Morales</h3>
            <div class="meta">S√°bado 30 de agosto, 8:00 pm</div>
            <div class="divider"></div>
            <div class="meta"><strong>Direcci√≥n:</strong> Polanco, CDMX, M√©xico</div>
            <div class="btns">
              <a class="btn ghost" target="_blank" rel="noopener" href="https://maps.google.com/?q=Hacienda+de+los+Morales"><i class="bi bi-geo-alt-fill"></i> Ver mapa</a>
              <button class="btn addcal" data-title="Recepci√≥n XV" data-location="Hacienda de los Morales" data-duration="PT240M"><i class="bi bi-calendar-plus"></i> Agendar</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- GALER√çA -->
    <section class="aos">
      <h2>Mis Fotos</h2>
      <p class="subtitle">Desliza para ver la galer√≠a</p>
      <div class="card carousel">
        <div class="track" id="track">
          <img src="./assets/img/portada.jpg"   alt="Foto 1" loading="lazy" onerror="this.style.display='none'">
          <img src="./assets/img/ceremonia.jpg" alt="Foto 2" loading="lazy" onerror="this.style.display='none'">
          <img src="./assets/img/recepcion.jpg" alt="Foto 3" loading="lazy" onerror="this.style.display='none'">
          <img src="./assets/img/portada.jpg"   alt="Foto 4" loading="lazy" onerror="this.style.display='none'">
        </div>
        <div class="nav" aria-hidden="true">
          <button id="prev" aria-label="Anterior"><i class="bi bi-chevron-left"></i></button>
          <button id="next" aria-label="Siguiente"><i class="bi bi-chevron-right"></i></button>
        </div>
      </div>
    </section>

    <!-- RSVP -->
    <section class="aos card rsvp" style="padding:16px 16px 18px;">
      <h2>Confirmar asistencia</h2>
      <p class="subtitle">Por favor confirma tu asistencia un mes antes del evento. ¬°Gracias!</p>
      <form id="rsvpForm" data-whatsapp="5215555555555">
        <div class="field"><input required type="text" name="nombre" placeholder="Tu nombre completo" autocomplete="name"></div>
        <div class="field">
          <select name="acompanantes" aria-label="Acompa√±antes">
            <option value="0">Asistir√© sin acompa√±antes</option>
            <option value="1">+1 acompa√±ante</option>
            <option value="2">+2 acompa√±antes</option>
            <option value="3">+3 acompa√±antes</option>
          </select>
        </div>
        <div class="btns">
          <button type="submit" class="btn"><i class="bi bi-whatsapp"></i> Confirmar por WhatsApp</button>
          <button type="button" id="editRSVP" class="btn ghost"><i class="bi bi-pencil"></i> Modificar</button>
        </div>
        <small>Tambi√©n puedes llamar a <a href="tel:+525155555555">55 5555 5555</a>.</small>
      </form>
    </section>

    <section class="aos" style="text-align:center; color:var(--muted); padding-bottom:56px;">
      <p>Con cari√±o,</p>
      <p class="script" style="margin-top:-6px">Brenda</p>
    </section>
  </main>

  <!-- Bot√≥n flotante m√∫sica -->
  <div class="music">
    <button class="btn" id="musicToggle" aria-pressed="false" aria-label="Reproducir m√∫sica"><i class="bi bi-music-note-beamed"></i><span style="margin-left:6px">M√∫sica</span></button>
  </div>

  <script>
    const $ = (s, el=document)=> el.querySelector(s);
    const $$= (s, el=document)=> [...el.querySelectorAll(s)];

    /* üì® Abrir sobre + SONIDO y (opcional) inicio de m√∫sica de fondo */
    (function(){
      const gate = $('#gate');
      const btn  = $('#openGate');
      const sfx  = $('#openSfx');
      btn.addEventListener('click', ()=>{
        try{ sfx.currentTime=0; sfx.play(); }catch{}
        gate.classList.add('open');
        document.body.classList.remove('lock');   // volver a permitir scroll

        // Si quieres iniciar la m√∫sica de fondo al abrir, descomenta esta l√≠nea:
        // $('#bgMusic')?.play().catch(()=>{});

        setTimeout(()=> gate.remove(), 800);      // limpia el DOM tras la animaci√≥n
      });
      // Accesible con Enter o Espacio
      btn.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); btn.click(); }});
    })();

    /* Animaciones on-scroll */
    const io = new IntersectionObserver(ents=>{ ents.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('show'); }); }, {threshold:.15});
    $$('.aos').forEach(el=> io.observe(el));

    /* Countdown */
    (function(){
      const root = document.getElementById('app');
      const dtStr = root.getAttribute('data-event-datetime');
      if(!dtStr) return;
      const eventDate = new Date(dtStr);
      const pad = n=> String(n).padStart(2,'0');
      function tick(){
        const now = new Date();
        let diff = eventDate - now;
        if (diff < 0) diff = 0;
        const d = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff / (1000*60*60)) % 24);
        const m = Math.floor((diff / (1000*60)) % 60);
        const s = Math.floor((diff / 1000) % 60);
        $('#d').textContent = pad(d); $('#h').textContent = pad(h); $('#m').textContent = pad(m); $('#s').textContent = pad(s);
      }
      tick(); setInterval(tick,1000);
    })();

    /* Carrusel */
    (function(){
      const track = document.getElementById('track');
      const prev  = document.getElementById('prev');
      const next  = document.getElementById('next');
      if(!track) return;
      prev?.addEventListener('click', ()=> track.scrollBy({left:-track.clientWidth, behavior:'smooth'}));
      next?.addEventListener('click', ()=> track.scrollBy({left: track.clientWidth, behavior:'smooth'}));
    })();

    /* M√∫sica */
    const bgMusic    = document.getElementById('bgMusic');
    const musicBtn   = document.getElementById('musicToggle');
    let musicPlaying = false;
    function toggleMusic(){
      if(!bgMusic.src){ alert('Agrega una pista en el <audio id="bgMusic">'); return; }
      if(musicPlaying){ bgMusic.pause(); musicPlaying=false; musicBtn.setAttribute('aria-pressed','false'); musicBtn.innerHTML='<i class="bi bi-music-note-beamed"></i><span style="margin-left:6px">M√∫sica</span>'; }
      else { bgMusic.play(); musicPlaying=true; musicBtn.setAttribute('aria-pressed','true'); musicBtn.innerHTML='<i class="bi bi-pause-fill"></i><span style="margin-left:6px">Pausar</span>'; }
    }
    musicBtn.addEventListener('click', toggleMusic);
    window.addEventListener('keydown', e=>{ if(e.key.toLowerCase()==='m') toggleMusic(); });

    /* Mensaje de voz */
    const voiceBtn  = document.getElementById('btnVoice');
    const voiceNote = document.getElementById('voiceNote');
    let voicePlaying=false;
    voiceBtn.addEventListener('click', ()=>{
      if(!voiceNote.src){ alert('Agrega un audio en el <audio id="voiceNote">'); return; }
      if(voicePlaying){ voiceNote.pause(); voiceNote.currentTime=0; voicePlaying=false; voiceBtn.innerHTML='<i class="bi bi-mic-fill"></i> Escuchar invitaci√≥n'; }
      else { voiceNote.play(); voicePlaying=true; voiceBtn.innerHTML='<i class="bi bi-stop-fill"></i> Detener audio'; }
    });
    voiceNote.addEventListener('ended', ()=>{ voicePlaying=false; voiceBtn.innerHTML='<i class="bi bi-mic-fill"></i> Escuchar invitaci√≥n'; });

    /* RSVP WhatsApp */
    const rsvp = document.getElementById('rsvpForm');
    rsvp?.addEventListener('submit', (e)=>{
      e.preventDefault();
      const nombre = rsvp.nombre.value.trim();
      const acomp  = rsvp.acompanantes.value;
      const dtStr  = document.getElementById('app').getAttribute('data-event-datetime');
      const fecha  = new Date(dtStr).toLocaleString('es-MX',{ dateStyle:'full', timeStyle:'short' });
      const msg    = `Hola, soy ${nombre}. Confirmo asistencia a los XV el ${fecha}. Acompa√±antes: ${acom}.`;
      const phone  = rsvp.getAttribute('data-whatsapp') || '5215555555555';
      const url    = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
      window.open(url, '_blank');
    });
    document.getElementById('editRSVP').addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    /* Agregar a calendario (.ics) */
    function addMinutes(date, m){ const d=new Date(date); d.setMinutes(d.getMinutes()+m); return d; }
    function formatICS(dt){ const p=n=>String(n).padStart(2,'0'); return `${dt.getUTCFullYear()}${p(dt.getUTCMonth()+1)}${p(dt.getUTCDate())}T${p(dt.getUTCHours())}${p(dt.getUTCMinutes())}${p(dt.getUTCSeconds())}Z`; }
    function downloadICS({title, description, location, start, durationMinutes=120}){
      const st=new Date(start); const en=addMinutes(st,durationMinutes);
      const ics=`BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Creative Studio//Invitacion//ES\nBEGIN:VEVENT\nUID:${Date.now()}@creativestudio\nDTSTAMP:${formatICS(new Date())}\nDTSTART:${formatICS(st)}\nDTEND:${formatICS(en)}\nSUMMARY:${title}\nDESCRIPTION:${description}\nLOCATION:${location}\nEND:VEVENT\nEND:VCALENDAR`;
      const blob=new Blob([ics],{type:'text/calendar'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=`${title.replace(/\s+/g,'_')}.ics`; a.click(); URL.revokeObjectURL(a.href);
    }
    $$('.addcal').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const title=btn.dataset.title||'Evento';
        const place=btn.dataset.location||'';
        const mins = Number(/PT(\d+)M/.exec(btn.dataset.duration||'PT120M')?.[1]||120);
        const start=document.getElementById('app').getAttribute('data-event-datetime');
        downloadICS({title, description:'Te esperamos ‚ù§', location:place, start, durationMinutes:mins});
      });
    });

    /* ‚ú® Estrellitas en CUALQUIER click/tap */
    function burstAt(x,y){
      // generar varias chispas alrededor del click
      for(let i=0;i<12;i++){
        const s=document.createElement('i');
        s.className='spark';
        const ang = Math.random()*Math.PI*2;
        const dist= 20 + Math.random()*40;
        const dx = Math.cos(ang)*dist;
        const dy = Math.sin(ang)*dist;
        s.style.left = (x+dx)+'px';
        s.style.top  = (y+dy)+'px';
        document.body.appendChild(s);
        setTimeout(()=> s.remove(), 900);
      }
    }
    // clicks del mouse
    document.addEventListener('click', (e)=>{
      // evita poner chispas cuando haces click para seleccionar texto dentro de inputs
      if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
      burstAt(e.clientX, e.clientY);
    });
    // taps t√°ctiles
    document.addEventListener('touchstart', (e)=>{
      const t = e.touches[0];
      if(!t) return;
      burstAt(t.clientX, t.clientY);
    }, {passive:true});
  </script>
</body>
</html>
